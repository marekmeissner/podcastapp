724c22ffbd20d2b8c3882fbeb5aae7c2
"use strict";var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports, "__esModule", { value: true });exports.default = void 0;var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));



var _utils = require("./utils");
var _serialize = require("./utils/serialize");
var _native = require("../../utils/native");var




WriteBatch = function () {
  function WriteBatch(firestore) {(0, _classCallCheck2.default)(this, WriteBatch);
    this._firestore = firestore;
    this._writes = [];
  }(0, _createClass2.default)(WriteBatch, [{ key: "commit", value: function commit()

    {
      return (0, _native.getNativeModule)(this._firestore).documentBatch(this._writes);
    } }, { key: "delete", value: function _delete(

    docRef) {



      this._writes.push({
        path: docRef.path,
        type: 'DELETE' });


      return this;
    } }, { key: "set", value: function set(

    docRef, data, options) {




      var nativeData = (0, _serialize.buildNativeMap)(data);

      this._writes.push({
        data: nativeData,
        options: options,
        path: docRef.path,
        type: 'SET' });


      return this;
    } }, { key: "update", value: function update(

    docRef) {for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {args[_key - 1] = arguments[_key];}


      var data = (0, _utils.parseUpdateArgs)(args, 'WriteBatch.update');

      this._writes.push({
        data: (0, _serialize.buildNativeMap)(data),
        path: docRef.path,
        type: 'UPDATE' });


      return this;
    } }]);return WriteBatch;}();exports.default = WriteBatch;